import xmpp, sys
#from build_rosters import build_rosters

accounts = {'ella@elko.26maidenlane.net': 'afwtl7j4', 'daniel@elko.26maidenlane.net': 'uutg3zbt', 'sophia@elko.26maidenlane.net': 'famwzxe2', 'noah@muliphen.26maidenlane.net': 'f7eclstk', 'logan@muliphen.26maidenlane.net': 'd8hlynaq', 'james@muliphen.26maidenlane.net': 'buahehfk', 'matthew@muliphen.26maidenlane.net': 'vdcukvuk', 'charlotte@elko.26maidenlane.net': '6bgkmjfn', 'natalie@elko.26maidenlane.net': 'uc4r5ck8', 'harper@muliphen.26maidenlane.net': 'vyx4uaz7', 'liam@elko.26maidenlane.net': '7nfun5em', 'evelyn@muliphen.26maidenlane.net': '88ctr5py', 'andrew@elko.26maidenlane.net': 'uakmbr33', 'sofia@elko.26maidenlane.net': 'eyvwbunb', 'lucas@muliphen.26maidenlane.net': '2hpa92zw', 'chloe@muliphen.26maidenlane.net': 'ht9czbxz', 'aiden@elko.26maidenlane.net': 'ngcy4zvy', 'jackson@elko.26maidenlane.net': 's79jvucp', 'avery@muliphen.26maidenlane.net': 'pzljljjh', 'ava@elko.26maidenlane.net': 'ftgadqvl', 'madison@elko.26maidenlane.net': 'kkgez8uy', 'aubrey@muliphen.26maidenlane.net': 'u36fnreq', 'mason@elko.26maidenlane.net': 'kmmfvqva', 'benjamin@elko.26maidenlane.net': '2ekvwjp7', 'gabriel@elko.26maidenlane.net': 'rdqp9qsq', 'elijah@muliphen.26maidenlane.net': 'drtkybpu', 'anthony@muliphen.26maidenlane.net': 'ntwqhace', 'william@muliphen.26maidenlane.net': '3hkkp8xt', 'zoey@muliphen.26maidenlane.net': 'qndjgbt3', 'grace@muliphen.26maidenlane.net': 'zsxhwdhj', 'hannah@elko.26maidenlane.net': 'bagjms6a', 'elizabeth@muliphen.26maidenlane.net': 'asdjswcv', 'joseph@elko.26maidenlane.net': 'xutxehdd', 'victoria@elko.26maidenlane.net': 'pttktw42', 'abigail@muliphen.26maidenlane.net': 'rlez4xd8', 'david@elko.26maidenlane.net': 'a22q6drp', 'jacob@muliphen.26maidenlane.net': 'sgwnd9km', 'isabella@muliphen.26maidenlane.net': 'ruftsefb', 'michael@muliphen.26maidenlane.net': 'abpwlsud', 'olivia@elko.26maidenlane.net': 'ryex5cw2', 'emma@muliphen.26maidenlane.net': 'kbsemhzg', 'alexander@elko.26maidenlane.net': '6tvmhfu6', 'joshua@muliphen.26maidenlane.net': 'nse9jg4k', 'emily@elko.26maidenlane.net': 'zha7utjl', 'mia@muliphen.26maidenlane.net': 'uysjzwdr', 'ethan@elko.26maidenlane.net': 'wnz7s7gr', 'amelia@elko.26maidenlane.net': '2d9hvmkp', 'samuel@muliphen.26maidenlane.net': '6bfdzq76', 'jayden@muliphen.26maidenlane.net': 'veynzak6', 'addison@elko.26maidenlane.net': 'yytezmrb'}

#rosters = build_rosters(accounts)

rosters = {'hannah@elko.26maidenlane.net': ['jacob@muliphen.26maidenlane.net', 'natalie@elko.26maidenlane.net', 'avery@muliphen.26maidenlane.net', 'grace@muliphen.26maidenlane.net', 'zoey@muliphen.26maidenlane.net', 'alexander@elko.26maidenlane.net', 'amelia@elko.26maidenlane.net'], 'ella@elko.26maidenlane.net': ['ethan@elko.26maidenlane.net', 'madison@elko.26maidenlane.net', 'mia@muliphen.26maidenlane.net', 'elizabeth@muliphen.26maidenlane.net', 'michael@muliphen.26maidenlane.net'], 'jacob@muliphen.26maidenlane.net': ['gabriel@elko.26maidenlane.net', 'anthony@muliphen.26maidenlane.net', 'emily@elko.26maidenlane.net', 'chloe@muliphen.26maidenlane.net', 'aubrey@muliphen.26maidenlane.net', 'aiden@elko.26maidenlane.net'], 'elizabeth@muliphen.26maidenlane.net': ['lucas@muliphen.26maidenlane.net', 'emily@elko.26maidenlane.net', 'addison@elko.26maidenlane.net', 'zoey@muliphen.26maidenlane.net', 'liam@elko.26maidenlane.net', 'mason@elko.26maidenlane.net', 'ava@elko.26maidenlane.net', 'anthony@muliphen.26maidenlane.net', 'mia@muliphen.26maidenlane.net', 'avery@muliphen.26maidenlane.net'], 'daniel@elko.26maidenlane.net': ['amelia@elko.26maidenlane.net', 'evelyn@muliphen.26maidenlane.net', 'elizabeth@muliphen.26maidenlane.net', 'avery@muliphen.26maidenlane.net', 'james@muliphen.26maidenlane.net', 'aiden@elko.26maidenlane.net', 'olivia@elko.26maidenlane.net'], 'mia@muliphen.26maidenlane.net': ['ella@elko.26maidenlane.net', 'joseph@elko.26maidenlane.net', 'charlotte@elko.26maidenlane.net', 'emma@muliphen.26maidenlane.net', 'sofia@elko.26maidenlane.net', 'ava@elko.26maidenlane.net', 'jacob@muliphen.26maidenlane.net', 'alexander@elko.26maidenlane.net'], 'victoria@elko.26maidenlane.net': ['david@elko.26maidenlane.net', 'william@muliphen.26maidenlane.net', 'joseph@elko.26maidenlane.net', 'mason@elko.26maidenlane.net', 'aiden@elko.26maidenlane.net', 'ella@elko.26maidenlane.net', 'jackson@elko.26maidenlane.net'], 'sophia@elko.26maidenlane.net': ['elizabeth@muliphen.26maidenlane.net', 'david@elko.26maidenlane.net', 'benjamin@elko.26maidenlane.net', 'joseph@elko.26maidenlane.net', 'chloe@muliphen.26maidenlane.net', 'emily@elko.26maidenlane.net', 'harper@muliphen.26maidenlane.net'], 'noah@muliphen.26maidenlane.net': ['ethan@elko.26maidenlane.net', 'gabriel@elko.26maidenlane.net', 'elizabeth@muliphen.26maidenlane.net', 'joshua@muliphen.26maidenlane.net', 'joseph@elko.26maidenlane.net', 'madison@elko.26maidenlane.net', 'abigail@muliphen.26maidenlane.net', 'olivia@elko.26maidenlane.net'], 'abigail@muliphen.26maidenlane.net': ['liam@elko.26maidenlane.net', 'elizabeth@muliphen.26maidenlane.net', 'elijah@muliphen.26maidenlane.net', 'harper@muliphen.26maidenlane.net', 'matthew@muliphen.26maidenlane.net'], 'logan@muliphen.26maidenlane.net': ['ella@elko.26maidenlane.net', 'abigail@muliphen.26maidenlane.net', 'mason@elko.26maidenlane.net', 'victoria@elko.26maidenlane.net', 'hannah@elko.26maidenlane.net', 'lucas@muliphen.26maidenlane.net'], 'james@muliphen.26maidenlane.net': ['abigail@muliphen.26maidenlane.net', 'elizabeth@muliphen.26maidenlane.net', 'olivia@elko.26maidenlane.net', 'mia@muliphen.26maidenlane.net', 'lucas@muliphen.26maidenlane.net', 'sophia@elko.26maidenlane.net', 'grace@muliphen.26maidenlane.net', 'natalie@elko.26maidenlane.net'], 'matthew@muliphen.26maidenlane.net': ['jackson@elko.26maidenlane.net', 'samuel@muliphen.26maidenlane.net', 'elizabeth@muliphen.26maidenlane.net', 'amelia@elko.26maidenlane.net', 'isabella@muliphen.26maidenlane.net', 'chloe@muliphen.26maidenlane.net', 'victoria@elko.26maidenlane.net'], 'david@elko.26maidenlane.net': ['james@muliphen.26maidenlane.net', 'daniel@elko.26maidenlane.net', 'andrew@elko.26maidenlane.net', 'joseph@elko.26maidenlane.net', 'michael@muliphen.26maidenlane.net', 'hannah@elko.26maidenlane.net'], 'ethan@elko.26maidenlane.net': ['emily@elko.26maidenlane.net', 'mia@muliphen.26maidenlane.net', 'jacob@muliphen.26maidenlane.net', 'matthew@muliphen.26maidenlane.net', 'hannah@elko.26maidenlane.net', 'addison@elko.26maidenlane.net', 'liam@elko.26maidenlane.net', 'elizabeth@muliphen.26maidenlane.net', 'anthony@muliphen.26maidenlane.net', 'evelyn@muliphen.26maidenlane.net'], 'charlotte@elko.26maidenlane.net': ['emma@muliphen.26maidenlane.net', 'gabriel@elko.26maidenlane.net', 'mason@elko.26maidenlane.net', 'avery@muliphen.26maidenlane.net', 'daniel@elko.26maidenlane.net', 'jackson@elko.26maidenlane.net', 'ava@elko.26maidenlane.net', 'addison@elko.26maidenlane.net'], 'natalie@elko.26maidenlane.net': ['daniel@elko.26maidenlane.net', 'samuel@muliphen.26maidenlane.net', 'elijah@muliphen.26maidenlane.net', 'lucas@muliphen.26maidenlane.net', 'elizabeth@muliphen.26maidenlane.net', 'gabriel@elko.26maidenlane.net', 'david@elko.26maidenlane.net'], 'harper@muliphen.26maidenlane.net': ['charlotte@elko.26maidenlane.net', 'evelyn@muliphen.26maidenlane.net', 'sophia@elko.26maidenlane.net', 'logan@muliphen.26maidenlane.net', 'emily@elko.26maidenlane.net', 'samuel@muliphen.26maidenlane.net'], 'isabella@muliphen.26maidenlane.net': ['david@elko.26maidenlane.net', 'joshua@muliphen.26maidenlane.net', 'avery@muliphen.26maidenlane.net', 'amelia@elko.26maidenlane.net', 'michael@muliphen.26maidenlane.net'], 'michael@muliphen.26maidenlane.net': ['emily@elko.26maidenlane.net', 'joshua@muliphen.26maidenlane.net', 'emma@muliphen.26maidenlane.net', 'joseph@elko.26maidenlane.net', 'isabella@muliphen.26maidenlane.net', 'mia@muliphen.26maidenlane.net', 'elizabeth@muliphen.26maidenlane.net'], 'evelyn@muliphen.26maidenlane.net': ['abigail@muliphen.26maidenlane.net', 'mason@elko.26maidenlane.net', 'chloe@muliphen.26maidenlane.net', 'liam@elko.26maidenlane.net', 'zoey@muliphen.26maidenlane.net', 'ava@elko.26maidenlane.net', 'lucas@muliphen.26maidenlane.net', 'elijah@muliphen.26maidenlane.net'], 'joseph@elko.26maidenlane.net': ['alexander@elko.26maidenlane.net', 'sofia@elko.26maidenlane.net', 'natalie@elko.26maidenlane.net', 'matthew@muliphen.26maidenlane.net', 'samuel@muliphen.26maidenlane.net', 'anthony@muliphen.26maidenlane.net'], 'andrew@elko.26maidenlane.net': ['zoey@muliphen.26maidenlane.net', 'aiden@elko.26maidenlane.net', 'joseph@elko.26maidenlane.net', 'ethan@elko.26maidenlane.net', 'aubrey@muliphen.26maidenlane.net', 'michael@muliphen.26maidenlane.net', 'victoria@elko.26maidenlane.net'], 'sofia@elko.26maidenlane.net': ['elijah@muliphen.26maidenlane.net', 'joseph@elko.26maidenlane.net', 'natalie@elko.26maidenlane.net', 'emma@muliphen.26maidenlane.net', 'alexander@elko.26maidenlane.net'], 'lucas@muliphen.26maidenlane.net': ['andrew@elko.26maidenlane.net', 'olivia@elko.26maidenlane.net', 'mia@muliphen.26maidenlane.net', 'joseph@elko.26maidenlane.net', 'emily@elko.26maidenlane.net', 'david@elko.26maidenlane.net', 'samuel@muliphen.26maidenlane.net'], 'liam@elko.26maidenlane.net': ['charlotte@elko.26maidenlane.net', 'mason@elko.26maidenlane.net', 'ethan@elko.26maidenlane.net', 'michael@muliphen.26maidenlane.net', 'jayden@muliphen.26maidenlane.net', 'gabriel@elko.26maidenlane.net', 'noah@muliphen.26maidenlane.net', 'ella@elko.26maidenlane.net', 'benjamin@elko.26maidenlane.net', 'joshua@muliphen.26maidenlane.net'], 'alexander@elko.26maidenlane.net': ['charlotte@elko.26maidenlane.net', 'isabella@muliphen.26maidenlane.net', 'victoria@elko.26maidenlane.net', 'ella@elko.26maidenlane.net', 'andrew@elko.26maidenlane.net', 'madison@elko.26maidenlane.net'], 'emma@muliphen.26maidenlane.net': ['alexander@elko.26maidenlane.net', 'hannah@elko.26maidenlane.net', 'daniel@elko.26maidenlane.net', 'sophia@elko.26maidenlane.net', 'anthony@muliphen.26maidenlane.net', 'madison@elko.26maidenlane.net', 'david@elko.26maidenlane.net', 'avery@muliphen.26maidenlane.net', 'abigail@muliphen.26maidenlane.net'], 'chloe@muliphen.26maidenlane.net': ['logan@muliphen.26maidenlane.net', 'matthew@muliphen.26maidenlane.net', 'benjamin@elko.26maidenlane.net', 'elijah@muliphen.26maidenlane.net', 'elizabeth@muliphen.26maidenlane.net', 'james@muliphen.26maidenlane.net'], 'aiden@elko.26maidenlane.net': ['grace@muliphen.26maidenlane.net', 'alexander@elko.26maidenlane.net', 'natalie@elko.26maidenlane.net', 'liam@elko.26maidenlane.net', 'addison@elko.26maidenlane.net'], 'emily@elko.26maidenlane.net': ['elizabeth@muliphen.26maidenlane.net', 'madison@elko.26maidenlane.net', 'james@muliphen.26maidenlane.net', 'jayden@muliphen.26maidenlane.net', 'charlotte@elko.26maidenlane.net'], 'jackson@elko.26maidenlane.net': ['natalie@elko.26maidenlane.net', 'daniel@elko.26maidenlane.net', 'olivia@elko.26maidenlane.net', 'logan@muliphen.26maidenlane.net', 'elizabeth@muliphen.26maidenlane.net', 'noah@muliphen.26maidenlane.net', 'jacob@muliphen.26maidenlane.net', 'michael@muliphen.26maidenlane.net'], 'avery@muliphen.26maidenlane.net': ['madison@elko.26maidenlane.net', 'joseph@elko.26maidenlane.net', 'harper@muliphen.26maidenlane.net', 'elizabeth@muliphen.26maidenlane.net', 'elijah@muliphen.26maidenlane.net'], 'olivia@elko.26maidenlane.net': ['amelia@elko.26maidenlane.net', 'jayden@muliphen.26maidenlane.net', 'logan@muliphen.26maidenlane.net', 'michael@muliphen.26maidenlane.net', 'noah@muliphen.26maidenlane.net', 'ella@elko.26maidenlane.net', 'andrew@elko.26maidenlane.net', 'emily@elko.26maidenlane.net', 'anthony@muliphen.26maidenlane.net'], 'ava@elko.26maidenlane.net': ['sofia@elko.26maidenlane.net', 'amelia@elko.26maidenlane.net', 'grace@muliphen.26maidenlane.net', 'david@elko.26maidenlane.net', 'mason@elko.26maidenlane.net', 'sophia@elko.26maidenlane.net'], 'madison@elko.26maidenlane.net': ['olivia@elko.26maidenlane.net', 'benjamin@elko.26maidenlane.net', 'ella@elko.26maidenlane.net', 'joseph@elko.26maidenlane.net', 'noah@muliphen.26maidenlane.net', 'harper@muliphen.26maidenlane.net', 'ethan@elko.26maidenlane.net', 'gabriel@elko.26maidenlane.net'], 'aubrey@muliphen.26maidenlane.net': ['olivia@elko.26maidenlane.net', 'michael@muliphen.26maidenlane.net', 'jackson@elko.26maidenlane.net', 'addison@elko.26maidenlane.net', 'noah@muliphen.26maidenlane.net', 'evelyn@muliphen.26maidenlane.net', 'anthony@muliphen.26maidenlane.net', 'hannah@elko.26maidenlane.net'], 'joshua@muliphen.26maidenlane.net': ['logan@muliphen.26maidenlane.net', 'sophia@elko.26maidenlane.net', 'hannah@elko.26maidenlane.net', 'amelia@elko.26maidenlane.net', 'elizabeth@muliphen.26maidenlane.net', 'evelyn@muliphen.26maidenlane.net', 'samuel@muliphen.26maidenlane.net', 'matthew@muliphen.26maidenlane.net'], 'mason@elko.26maidenlane.net': ['david@elko.26maidenlane.net', 'ethan@elko.26maidenlane.net', 'natalie@elko.26maidenlane.net', 'avery@muliphen.26maidenlane.net', 'isabella@muliphen.26maidenlane.net', 'amelia@elko.26maidenlane.net', 'emma@muliphen.26maidenlane.net', 'joshua@muliphen.26maidenlane.net'], 'benjamin@elko.26maidenlane.net': ['avery@muliphen.26maidenlane.net', 'alexander@elko.26maidenlane.net', 'zoey@muliphen.26maidenlane.net', 'anthony@muliphen.26maidenlane.net', 'amelia@elko.26maidenlane.net', 'grace@muliphen.26maidenlane.net', 'ava@elko.26maidenlane.net', 'aiden@elko.26maidenlane.net'], 'gabriel@elko.26maidenlane.net': ['jacob@muliphen.26maidenlane.net', 'david@elko.26maidenlane.net', 'samuel@muliphen.26maidenlane.net', 'isabella@muliphen.26maidenlane.net', 'sofia@elko.26maidenlane.net', 'amelia@elko.26maidenlane.net', 'olivia@elko.26maidenlane.net'], 'elijah@muliphen.26maidenlane.net': ['samuel@muliphen.26maidenlane.net', 'evelyn@muliphen.26maidenlane.net', 'madison@elko.26maidenlane.net', 'aubrey@muliphen.26maidenlane.net', 'aiden@elko.26maidenlane.net', 'alexander@elko.26maidenlane.net'], 'anthony@muliphen.26maidenlane.net': ['gabriel@elko.26maidenlane.net', 'william@muliphen.26maidenlane.net', 'jacob@muliphen.26maidenlane.net', 'abigail@muliphen.26maidenlane.net', 'victoria@elko.26maidenlane.net', 'mason@elko.26maidenlane.net', 'daniel@elko.26maidenlane.net', 'olivia@elko.26maidenlane.net'], 'william@muliphen.26maidenlane.net': ['isabella@muliphen.26maidenlane.net', 'victoria@elko.26maidenlane.net', 'hannah@elko.26maidenlane.net', 'ella@elko.26maidenlane.net', 'abigail@muliphen.26maidenlane.net', 'andrew@elko.26maidenlane.net', 'alexander@elko.26maidenlane.net', 'logan@muliphen.26maidenlane.net', 'addison@elko.26maidenlane.net'], 'amelia@elko.26maidenlane.net': ['gabriel@elko.26maidenlane.net', 'joseph@elko.26maidenlane.net', 'victoria@elko.26maidenlane.net', 'emily@elko.26maidenlane.net', 'jayden@muliphen.26maidenlane.net', 'logan@muliphen.26maidenlane.net', 'samuel@muliphen.26maidenlane.net', 'matthew@muliphen.26maidenlane.net', 'james@muliphen.26maidenlane.net'], 'samuel@muliphen.26maidenlane.net': ['chloe@muliphen.26maidenlane.net', 'daniel@elko.26maidenlane.net', 'emma@muliphen.26maidenlane.net', 'jackson@elko.26maidenlane.net', 'madison@elko.26maidenlane.net', 'william@muliphen.26maidenlane.net', 'ethan@elko.26maidenlane.net', 'logan@muliphen.26maidenlane.net', 'noah@muliphen.26maidenlane.net', 'andrew@elko.26maidenlane.net'], 'jayden@muliphen.26maidenlane.net': ['charlotte@elko.26maidenlane.net', 'james@muliphen.26maidenlane.net', 'alexander@elko.26maidenlane.net', 'logan@muliphen.26maidenlane.net', 'madison@elko.26maidenlane.net', 'jackson@elko.26maidenlane.net', 'noah@muliphen.26maidenlane.net', 'emily@elko.26maidenlane.net', 'ava@elko.26maidenlane.net', 'liam@elko.26maidenlane.net'], 'zoey@muliphen.26maidenlane.net': ['victoria@elko.26maidenlane.net', 'alexander@elko.26maidenlane.net', 'benjamin@elko.26maidenlane.net', 'amelia@elko.26maidenlane.net', 'chloe@muliphen.26maidenlane.net'], 'addison@elko.26maidenlane.net': ['jacob@muliphen.26maidenlane.net', 'avery@muliphen.26maidenlane.net', 'anthony@muliphen.26maidenlane.net', 'natalie@elko.26maidenlane.net', 'madison@elko.26maidenlane.net', 'isabella@muliphen.26maidenlane.net', 'grace@muliphen.26maidenlane.net', 'michael@muliphen.26maidenlane.net', 'olivia@elko.26maidenlane.net'], 'grace@muliphen.26maidenlane.net': ['ava@elko.26maidenlane.net', 'michael@muliphen.26maidenlane.net', 'abigail@muliphen.26maidenlane.net', 'addison@elko.26maidenlane.net', 'isabella@muliphen.26maidenlane.net', 'hannah@elko.26maidenlane.net', 'mason@elko.26maidenlane.net', 'gabriel@elko.26maidenlane.net', 'elijah@muliphen.26maidenlane.net', 'sofia@elko.26maidenlane.net']}

for user in rosters:
    print '\nI am ' + user
    passwd = accounts[user]
    jid=xmpp.JID(user)
    con=xmpp.Client(jid.getDomain(),debug=[])
    con.connect()
    con.auth(jid.getNode(),passwd)
    pres = xmpp.Presence()
    pres.setShow('online')
    pres.setStatus('let\'s chat!')
    pres.setPriority(1)
    con.send(pres)
    roster = con.getRoster()
    contacts = roster.getItems()
    me = jid.getNode() + '@' + jid.getDomain()

    wishlist = rosters[user]
    for contact in wishlist:
        if contact not in contacts:
            print '\t', 'Adding', contact, 'to my buddy list.'
            roster.Subscribe(contact)

    #for contact in contacts:
    #    print contact,
    #    print roster.getSubscription(contact)
    #    print

    for contact in contacts:
        contactStatus = roster.getSubscription(contact)
        parts = contact.split('@')
        name = parts[0]
        domain = parts[1].split('.')[0]
        #print '\t Processing', contact,
        print '\t Processing ' + name + '@' + domain, 
        tjid = xmpp.JID(contact)
        if tjid == me:
            print '\t', 'That\'s me!'
        elif contactStatus == 'both':
            print '\t', 'Already subscribed'
        elif contactStatus == 'to':
            roster.Authorize(contact)
            print '\t', 'Authorizing'
        elif contactStatus == 'from':
            roster.Subscribe(contact)
            print '\t', 'Subscribing'
        elif contactStatus == 'none':
            print '\t', 'Doing both'
            roster.Subscribe(contact)
            roster.Authorize(contact)
        else:
            print '\tContact status:', contactStatus

    con.disconnect()
